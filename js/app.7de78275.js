(function(){"use strict";var e={4703:function(e,t,a){var n=a(9242),r=a(3396);const s={class:"app"};function o(e,t,a,n,o,i){const l=(0,r.up)("navbar"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r._)("div",s,[(0,r.Wm)(u)])],64)}a(7658);const i={class:"navbar"},l={key:0,class:"navbar__btns"},u={key:1,class:"navbar__btns"};function d(e,t,a,n,s,o){const d=(0,r.up)("my-button");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",{onClick:t[0]||(t[0]=t=>e.$router.push("/CRUD")),class:"navbar__title"},"CRUD"),s.authorizationStore.userToken?((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)(d,{class:"navbar__btn",onClick:t[1]||(t[1]=t=>e.$router.push("/usersbase"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Users list")])),_:1}),(0,r.Wm)(d,{class:"navbar__btn",onClick:o.logout},{default:(0,r.w5)((()=>[(0,r.Uk)("Log out")])),_:1},8,["onClick"])])):((0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(d,{class:"navbar__btn",onClick:t[2]||(t[2]=t=>e.$router.push("/login"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Sign in")])),_:1}),(0,r.Wm)(d,{class:"navbar__btn",onClick:t[3]||(t[3]=t=>e.$router.push("/registration"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Registration")])),_:1})]))])}var c=a(2483);const m=e=>((0,r.dD)("data-v-4e8ca0e2"),e=e(),(0,r.Cn)(),e),p={class:"content"},h=m((()=>(0,r._)("h1",null,"Welcome to the CRUD app",-1))),g=[h];function _(e,t){return(0,r.wg)(),(0,r.iD)("div",p,g)}var f=a(89);const v={},w=(0,f.Z)(v,[["render",_],["__scopeId","data-v-4e8ca0e2"]]);var b=w,k=a(7139);const y=e=>((0,r.dD)("data-v-7f7c0875"),e=e(),(0,r.Cn)(),e),E={class:"form__inner"},I=y((()=>(0,r._)("legend",null,"Sign in",-1))),U=y((()=>(0,r._)("label",null,"Email",-1))),C=y((()=>(0,r._)("label",null,"Password",-1))),D={key:0,class:"danger__text"};function S(e,t,a,s,o,i){const l=(0,r.up)("my-input"),u=(0,r.up)("my-button");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)((()=>{}),["prevent"])),class:"form"},[(0,r._)("div",E,[I,U,(0,r.Wm)(l,{placeholder:"Enter your login",modelValue:o.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),class:(0,k.C_)({danger:o.hasError})},null,8,["modelValue","class"]),C,(0,r.Wm)(l,{type:"password",placeholder:"Enter your password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),class:(0,k.C_)({danger:o.hasError})},null,8,["modelValue","class"]),o.hasError?((0,r.wg)(),(0,r.iD)("span",D,"Wrong email or password")):(0,r.kq)("",!0),(0,r.Wm)(u,{onClick:i.logIn},{default:(0,r.w5)((()=>[(0,r.Uk)("Login in #1")])),_:1},8,["onClick"]),(0,r.Wm)(u,{onClick:i.authorization},{default:(0,r.w5)((()=>[(0,r.Uk)("Login in #2")])),_:1},8,["onClick"]),(0,r._)("span",null,[(0,r.Uk)("Don't have an account? "),(0,r._)("a",{class:"hypertext-btn",onClick:t[2]||(t[2]=t=>e.$router.push("/registration"))},"Register here!")])])],32)}var V=a(2578),W=a(4870);const N=(0,V.Q_)("authorizationStore",(()=>{const e=(0,W.iH)([{email:"john@mail.com",password:"changeme"},{email:"nike-jam@mail.com",password:"qwerty"},{email:"test@mail.com",password:"testacc"}]);let t=(0,W.iH)(null);const a=localStorage.getItem("userToken");a&&(t.value=JSON.parse(a)._value),(0,r.YP)((()=>t),(e=>{localStorage.setItem("userToken",JSON.stringify(e))}),{deep:!0});const n=localStorage.getItem("loginData");return n&&(e.value=JSON.parse(n)._value),(0,r.YP)((()=>e),(e=>{localStorage.setItem("loginData",JSON.stringify(e))}),{deep:!0}),{loginData:e,userToken:t,loginInLocalStorage:n,userTokenInLocalStorage:a}}));var O=a(4161);const z=["value"];function T(e,t,a,n,s,o){return(0,r.wg)(),(0,r.iD)("input",{value:a.modelValue,onInput:t[0]||(t[0]=(...e)=>o.updateInput&&o.updateInput(...e)),class:"input",type:"text"},null,40,z)}var L={name:"my-input",props:{modelValue:[String,Number]},methods:{updateInput(e){this.$emit("update:modelValue",e.target.value)}}};const R=(0,f.Z)(L,[["render",T]]);var Z=R;const x={class:"btn"};function j(e,t,a,n,s,o){return(0,r.wg)(),(0,r.iD)("button",x,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var A={name:"my-button"};const M=(0,f.Z)(A,[["render",j],["__scopeId","data-v-7804eb33"]]);var q=M,$={components:{MyInput:Z,MyButton:q},data(){return{email:"john@mail.com",password:"changeme",authorizationStore:N(),loginData:N().loginData,hasError:!1}},methods:{authorization(){this.loginData.find((e=>e.email==this.email))&&this.loginData.find((e=>e.password==this.password))?(this.authorizationStore.userToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzNDM0NTY3ODkwIiwibmFtZSI6IlRlc3QgVXNlciIsImlhdCI6MTUxNjIzOTAyMn0.Z5nZb8tvEm2q4gkj2oDK2x2ZdxoBrkOz0SXE1OK5ScQ",console.log(this.authorizationStore.userToken),this.hasError=!1,Pe.push("/usersbase"),Pe.beforeEach(((e,t,a)=>{"/login"===e.path||this.authorizationStore.userToken?a():a({path:"/login"})}))):this.hasError=!0},async logIn(){let e="https://api.escuelajs.co/api/v1/auth/login";try{const t=await O.Z.post(e,{email:this.email,password:this.password});t&&t.data&&(this.authorizationStore.userToken={accessToken:t.data.access_token,refreshToken:t.data.refresh_token},console.log(this.authorizationStore.userToken),this.hasError=!1,Pe.push("/usersbase"))}catch(t){console.error(t),this.hasError=!0}}}};const J=(0,f.Z)($,[["render",S],["__scopeId","data-v-7f7c0875"]]);var B=J;const P=e=>((0,r.dD)("data-v-318cb695"),e=e(),(0,r.Cn)(),e),Y={class:"form__inner"},H=P((()=>(0,r._)("legend",null,"Registration",-1))),Q=P((()=>(0,r._)("label",null,"Email",-1))),X=P((()=>(0,r._)("label",null,"Password",-1))),F=P((()=>(0,r._)("label",null,"Confirm your password",-1))),K={key:0,class:"danger__text"};function G(e,t,a,s,o,i){const l=(0,r.up)("my-input"),u=(0,r.up)("my-button");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[4]||(t[4]=(0,n.iM)((()=>{}),["prevent"])),class:"form"},[(0,r._)("div",Y,[H,Q,(0,r.Wm)(l,{type:"email",placeholder:"Enter your email",modelValue:o.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),required:""},null,8,["modelValue"]),X,(0,r.Wm)(l,{type:"password",placeholder:"Create your password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),class:(0,k.C_)({danger:o.hasError}),required:""},null,8,["modelValue","class"]),F,(0,r.Wm)(l,{type:"password",placeholder:"Repeat your password",modelValue:o.passwordConfirm,"onUpdate:modelValue":t[2]||(t[2]=e=>o.passwordConfirm=e),class:(0,k.C_)({danger:o.hasError}),required:""},null,8,["modelValue","class"]),o.hasError?((0,r.wg)(),(0,r.iD)("span",K,"Your passwords do not match")):(0,r.kq)("",!0),(0,r.Wm)(u,{onClick:i.registration},{default:(0,r.w5)((()=>[(0,r.Uk)("Register")])),_:1},8,["onClick"]),(0,r._)("span",null,[(0,r.Uk)("Already have an account? "),(0,r._)("a",{class:"hypertext-btn",onClick:t[3]||(t[3]=t=>e.$router.push("/login"))},"Login In")])])],32)}var ee={components:{MyInput:Z,MyButton:q},data(){return{email:"",password:"",passwordConfirm:"",loginStore:N().loginData,hasError:!1}},methods:{registration(){this.password==this.passwordConfirm&&this.email&&this.password&&this.passwordConfirm?(this.loginStore.push({email:this.email,password:this.password}),this.hasError=!1,Pe.push("/login")):this.hasError=!0}}};const te=(0,f.Z)(ee,[["render",G],["__scopeId","data-v-318cb695"]]);var ae=te;const ne={class:"user"};function re(e,t,a,n,s,o){const i=(0,r.up)("user-form"),l=(0,r.up)("user-list");return(0,r.wg)(),(0,r.iD)("div",ne,[(0,r.Wm)(i,{onCreate:o.addNewUser,"current-id":s.userList.length},null,8,["onCreate","current-id"]),(0,r.Wm)(l,{userList:this.userList,onRemove:o.removeUser},null,8,["userList","onRemove"])])}const se=e=>((0,r.dD)("data-v-af99184a"),e=e(),(0,r.Cn)(),e),oe={class:"form__inner"},ie=se((()=>(0,r._)("h1",{class:"form__title"},"Add new user",-1))),le={class:"form__group"},ue=se((()=>(0,r._)("label",null,"Name",-1))),de={class:"form__group"},ce=se((()=>(0,r._)("label",null,"e-mail",-1)));function me(e,t,a,s,o,i){const l=(0,r.up)("my-input"),u=(0,r.up)("my-button");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("form",{class:"form",onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>i.addNewUser&&i.addNewUser(...e)),["prevent"]))},[(0,r._)("div",oe,[ie,(0,r._)("div",le,[ue,(0,r.Wm)(l,{id:"user-name",placeholder:"Enter user name",modelValue:o.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.user.name=e),required:""},null,8,["modelValue"])]),(0,r._)("div",de,[ce,(0,r.Wm)(l,{type:"email",id:"user-email",placeholder:"Enter user e-mail",modelValue:o.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>o.user.email=e),required:""},null,8,["modelValue"])]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Add user")])),_:1})])],32)])}var pe={components:{MyButton:q,MyInput:Z},data(){return{user:{id:null,name:"",email:"",role:"user",isEditing:!1}}},emits:["create"],props:{currentId:{type:Number,required:!0}},methods:{addNewUser(){this.user.id=this.currentId,this.user.isEditing=!1,this.$emit("create",this.user),this.user={id:null,name:"",email:""}}}};const he=(0,f.Z)(pe,[["render",me],["__scopeId","data-v-af99184a"]]);var ge=he;const _e=e=>((0,r.dD)("data-v-015fe72a"),e=e(),(0,r.Cn)(),e),fe={class:"userlist"},ve=_e((()=>(0,r._)("thead",{class:"userlist__header"},[(0,r._)("tr",null,[(0,r._)("td",null,"User name"),(0,r._)("td",null,"User Email"),(0,r._)("td",null,"Actions")])],-1)));function we(e,t,a,n,s,o){const i=(0,r.up)("user-item");return(0,r.wg)(),(0,r.iD)("table",fe,[ve,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.userList,(a=>((0,r.wg)(),(0,r.j4)(i,{key:a.id,user:a,onRemove:t[0]||(t[0]=t=>e.$emit("remove",e.post))},null,8,["user"])))),128))])])}const be={key:0,class:"user"},ke={class:"user__name"},ye={class:"user__email"},Ee={class:"action-btns"},Ie={key:1,class:"user"},Ue={class:"user__name"},Ce={class:"user__email"},De={class:"action-btns"};function Se(e,t,a,n,s,o){const i=(0,r.up)("action-btn"),l=(0,r.up)("my-input");return a.user.isEditing?((0,r.wg)(),(0,r.iD)("tr",Ie,[(0,r._)("td",Ue,[(0,r.Wm)(l,{class:"user__input",modelValue:s.changedName,"onUpdate:modelValue":t[2]||(t[2]=e=>s.changedName=e)},null,8,["modelValue"])]),(0,r._)("td",Ce,[(0,r.Wm)(l,{class:"user__input",modelValue:s.changedEmail,"onUpdate:modelValue":t[3]||(t[3]=e=>s.changedEmail=e)},null,8,["modelValue"])]),(0,r._)("td",De,[(0,r.Wm)(i,{class:"confirm-btn",onClick:t[4]||(t[4]=e=>o.confirmEditing(a.user))},{default:(0,r.w5)((()=>[(0,r.Uk)("Ok")])),_:1}),(0,r.Wm)(i,{class:"danger-btn",onClick:t[5]||(t[5]=e=>o.stopEditing(a.user))},{default:(0,r.w5)((()=>[(0,r.Uk)("X")])),_:1})])])):((0,r.wg)(),(0,r.iD)("tr",be,[(0,r._)("td",ke,(0,k.zw)(a.user.name),1),(0,r._)("td",ye,(0,k.zw)(a.user.email),1),(0,r._)("td",Ee,[(0,r.Wm)(i,{class:"edit-btn",onClick:t[0]||(t[0]=e=>o.editUser(a.user))},{default:(0,r.w5)((()=>[(0,r.Uk)("E")])),_:1}),(0,r.Wm)(i,{class:"danger-btn",onClick:t[1]||(t[1]=t=>e.$emit("remove",a.user))},{default:(0,r.w5)((()=>[(0,r.Uk)("D")])),_:1})])]))}const Ve={class:"btn"};function We(e,t,a,n,s,o){return(0,r.wg)(),(0,r.iD)("button",Ve,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var Ne={name:"action-btn"};const Oe=(0,f.Z)(Ne,[["render",We],["__scopeId","data-v-b8188aa6"]]);var ze=Oe,Te={components:{ActionButton:ze,MyInput:Z},props:{user:{type:Object,requaired:!0}},emits:["remove"],data(){return{changedName:"",changedEmail:""}},methods:{editUser(e){e.isEditing=!0,this.changedName=e.name,this.changedEmail=e.email},confirmEditing(e){e.name=this.changedName,e.email=this.changedEmail,this.stopEditing(e)},stopEditing(e){this.changedEmail="",this.changedName="",e.isEditing=!1}}};const Le=(0,f.Z)(Te,[["render",Se],["__scopeId","data-v-7853864f"]]);var Re=Le,Ze={components:{UserItem:Re},props:{userList:{type:Array,reqired:!0}},emits:["remove"],data(){return{}},methods:{}};const xe=(0,f.Z)(Ze,[["render",we],["__scopeId","data-v-015fe72a"]]);var je=xe;const Ae=(0,V.Q_)("userStore",(()=>{const e=(0,W.iH)([{id:1,name:"John",email:"j.trvlt@yahoo.com",isEditing:!1},{id:2,name:"Adolf",email:"adolBf@gmail.com",isEditing:!1},{id:3,name:"Alex",email:"alex-hirsh@gmail.com",isEditing:!1},{id:4,name:"Admin",email:"coolAdmin@bk.co",isEditing:!1},{id:5,name:"Admin333",email:"coolAdmin21321@bk.co",isEditing:!1}]),t=localStorage.getItem("users");return t&&(e.value=JSON.parse(t)._value),(0,r.YP)((()=>e),(e=>{localStorage.setItem("users",JSON.stringify(e))}),{deep:!0}),{users:e}}));var Me={components:{UserForm:ge,UserList:je},data(){return{userList:Ae().users}},methods:{addNewUser(e){this.userList.push(e)},removeUser(e){this.userList.splice(this.userList.indexOf(e),1)}}};const qe=(0,f.Z)(Me,[["render",re]]);var $e=qe;const Je=[{path:"/CRUD",component:b},{path:"/login",component:B},{path:"/registration",component:ae},{path:"/usersbase",component:$e}],Be=(0,c.p7)({routes:Je,history:(0,c.PO)({NODE_ENV:"production",BASE_URL:"/CRUD/"}.BASE_URl)});Be.beforeEach(((e,t,a)=>{let n=N().userToken;"/usersbase"!=e.path||n?a():a({path:"/login"})}));var Pe=Be,Ye={components:{MyButton:q},data(){return{authorizationStore:N()}},methods:{logout(){this.authorizationStore.userToken=null,Pe.push("/login")}}};const He=(0,f.Z)(Ye,[["render",d],["__scopeId","data-v-3399f943"]]);var Qe=He,Xe={components:{Navbar:Qe},data(){return{loginStore:N()}}};const Fe=(0,f.Z)(Xe,[["render",o]]);var Ke=Fe,Ge=[ze,Z,q];const et=(0,V.WB)(),tt=(0,n.ri)(Ke);Ge.forEach((e=>{tt.component(e.name,e)})),tt.use(et).use(Pe).mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,s){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],s=e[d][2];for(var i=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var u=r();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,o=n[0],i=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var d=l(a)}for(t&&t(n);u<o.length;u++)s=o[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},n=self["webpackChunkcrud"]=self["webpackChunkcrud"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4703)}));n=a.O(n)})();
//# sourceMappingURL=app.7de78275.js.map